# **變更代碼覆蓋率**

**變更代碼覆蓋率**讓您可以聚焦這次變更代碼的測試情況。

## 維度


### **新增（文件）行覆蓋率**

**計算邏輯：**
1. git diff 兩個提交之間的差異文件 => 差異行號（會有包含註釋、空白行的情況）
2. 遍歷變更文件 **coverageMap** 的 **branchMap**、**fnMap**、**statementMap** 的定位是否包含了差異行號
3. **已覆蓋**的定義：差異行號所處的 **branchMap**、**fnMap**、**statementMap** 均已覆蓋

**計算公式：**


```
新增（文件）行覆蓋率 = 已覆蓋（文件）行數 / 新增（文件）行總數
```

### **新增分支覆蓋率**

**計算邏輯：**
1. git diff 兩個提交之間的差異文件 => 差異行號
2. 遍歷變更文件 **coverageMap** 的 **branchMap** 的定位是否包含了差異行號
3. **已覆蓋**的定義：差異行號所處的 **branchMap** 已覆蓋

**計算公式：**
```
新增分支覆蓋率 = 已覆蓋分支數 / 新增分支總數
```

### **新增函數覆蓋率**

**計算邏輯：**
1. git diff 兩個提交之間的差異文件 => 差異行號
2. 遍歷變更文件 **coverageMap** 的 **fnMap** 的定位是否包含了差異行號
3. **已覆蓋**的定義：差異行號所處的 **fnMap** 已覆蓋

**計算公式：**
```
新增函數覆蓋率 = 已覆蓋函數數 / 新增函數總數
```

### **新增語句覆蓋率**
**計算邏輯：**
1. git diff 兩個提交之間的差異文件 => 差異行號
2. 遍歷變更文件 **coverageMap** 的 **statementMap** 的定位是否包含了差異行號
3. **已覆蓋**的定義：差異行號所處的 **statementMap** 已覆蓋
**計算公式：**
```
新增語句覆蓋率 = 已覆蓋語句數 / 新增語句總數
```
