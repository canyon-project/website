# 介紹

## 概述

Canyon（意為 "峽谷"，發音 /ˈkænjən/）是一個 JavaScript 代碼覆蓋率收集平台。我們解決了開發人員和 QA 工程師在端到端測試過程中收集測試用例代碼覆蓋率時遇到的困難。它由三個主要部分組成：

- 負責適配各種CI提供商、偵測環境變量的一系列 [插件](https://github.com/canyon-project/canyon/tree/main/plugins)。

- 負責收集處理覆蓋率數據，提供後端API的 [nodejs服務](https://github.com/canyon-project/canyon/tree/main/packages/canyon-backend)。

- 負責展示覆蓋率數據的 [react前端應用](https://github.com/canyon-project/canyon/tree/main/packages/canyon-platform)。

![](https://cdn.jsdelivr.net/gh/canyon-project/assets/docs/static/docs/getting-started/introduction/home-screen.png)

## 為什麼是Canyon?

Canyon通過在編譯階段分離 hit 和 map 數據，能夠高效處理 UI 自動化測試產生的大量覆蓋率數據。

此外，Canyon 適配了常見CI提供商，能夠在構建階段插入探針代碼，在 UI 自動化測試階段收集和上報覆蓋率數據。

這使得開發團隊能夠 __準確__ 、 __實時__ 的了解當前 UI 自動化測試 __每個用例__ 的覆蓋率情況，從而更好地評估和提升代碼質量。

### 功能特點

- [準確高效](/docs/core-concepts/separate-hit-and-map)：通過分離hit、map，編譯時生成初始覆蓋率數據，準確高效的收集覆蓋率數據
- [SourceMap](/docs/core-concepts/restore-source-code-coverage)：準確的源碼覆蓋率還原
- [構建工具](/docs/installation/getting-started)：提供next.js、vite、webpack等常見構建工具的覆蓋率方案
- [自動化框架](/docs/end-to-end-testing/getting-started)：提供常見UI自動化框架集成方案
- [CI提供商](/docs/reference/provider)：適配常見CI提供商（Github Actions、GitLab Runner），偵測CI環境變量


### 自託管

如果您希望完全掌控您的覆蓋率數據和測試數據，您可以在自己的基礎設施上[自託管](/docs/self-host/community-edition/prerequisites) Canyon。

## 生態系統

| 項目                  | 狀態                                                         | 描述                                         |
| --------------------- | ------------------------------------------------------------ | -------------------------------------------- |
| [babel-plugin-canyon] | [![babel-plugin-canyon-status]][babel-plugin-canyon-package] | Babel 插件，用於檢測流水線環境變量           |
| [canyon-uploader]     | [![canyon-uploader-status]][canyon-uploader-package]         | 掃描本地 `.canyon_output` 數據並上傳到服務器 |
| [canyon-extension]    | [![canyon-extension-status]][canyon-extension-package]       | Chrome 插件，用於手動上報覆蓋率數據          |

[babel-plugin-canyon]: /docs/ecosystem/babel-plugin-canyon
[vite-plugin-canyon]: https://github.com/canyon-project/vite-plugin-canyon
[canyon-uploader]: /docs/ecosystem/canyon-uploader
[canyon-extension]: /docs/ecosystem/canyon-extension
[babel-plugin-canyon-status]: https://img.shields.io/npm/v/babel-plugin-canyon.svg
[vite-plugin-canyon-status]: https://img.shields.io/npm/v/vite-plugin-canyon.svg
[canyon-uploader-status]: https://img.shields.io/npm/v/canyon-uploader.svg
[canyon-extension-status]: https://img.shields.io/chrome-web-store/v/omnpafdjidgpdmlimbangcjjaaodbeof.svg
[babel-plugin-canyon-package]: https://npmjs.com/package/babel-plugin-canyon
[vite-plugin-canyon-package]: https://npmjs.com/package/babel-plugin-vite
[canyon-uploader-package]: https://npmjs.com/package/canyon-uploader
[canyon-extension-package]: https://chrome.google.com/webstore/detail/canyon/omnpafdjidgpdmlimbangcjjaaodbeof

## 架構

以下圖示展示了 Canyon 及其生態系統的一些組件架構：

1. Babel 插件在 CI/CD 流水線中完成代碼插樁。
2. 項目發布到測試環境，用戶可以選擇 UI 自動化或手動測試來觸發插樁代碼探針。
3. 生成的覆蓋率數據上報至 Canyon 服務器。
4. Canyon 服務器消費數據，並結合 GitLab 提供的源代碼信息生成覆蓋率報告。

![](https://cdn.jsdelivr.net/gh/canyon-project/assets/docs/static/docs/getting-started/introduction/architecture.png)
