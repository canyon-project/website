# istanbuljs 커버리지 데이터 사전

## 개요
istanbuljs는 JavaScript 코드 커버리지의 표준으로, 이 데이터 사전은 커버리지 데이터의 주요 구조와 필드를 설명합니다.

## 주요 데이터 구조

### 1. Coverage Object (커버리지 객체)
최상위 커버리지 데이터 구조로, 모든 파일의 커버리지 정보를 포함합니다.

```json
{
  "path/to/file.js": {
    // FileCoverage 객체
  }
}
```

### 2. FileCoverage (파일 커버리지)
단일 파일의 완전한 커버리지 데이터입니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `path` | string | 파일의 절대 경로 |
| `statementMap` | Object | 구문 매핑 테이블 |
| `fnMap` | Object | 함수 매핑 테이블 |
| `branchMap` | Object | 분기 매핑 테이블 |
| `s` | Object | 구문 실행 카운트 |
| `f` | Object | 함수 실행 카운트 |
| `b` | Object | 분기 실행 카운트 |

### 3. StatementMap (구문 매핑)
코드에서 각 구문의 위치 정보를 설명합니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `start` | Location | 구문 시작 위치 |
| `end` | Location | 구문 종료 위치 |

### 4. FunctionMap (함수 매핑)
코드에서 각 함수의 정보를 설명합니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `name` | string | 함수 이름(익명 함수는 "(anonymous_N)"으로 표시) |
| `decl` | Location | 함수 선언 위치 |
| `loc` | Location | 함수 본문 위치 |
| `line` | number | 함수 선언 행 번호 |

### 5. BranchMap (분기 매핑)
코드에서 각 분기의 정보를 설명합니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `loc` | Location | 분기 위치 |
| `type` | string | 분기 유형(if, switch, cond-expr, binary-expr) |
| `locations` | Array&lt;Location&gt; | 분기 조건의 모든 가능한 위치 |

### 6. Location (위치 정보)
소스 코드에서의 위치를 설명합니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `start` | Position | 시작 위치 |
| `end` | Position | 종료 위치 |

### 7. Position (좌표 위치)
소스 코드에서의 구체적인 좌표입니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `line` | number | 행 번호(1부터 시작) |
| `column` | number | 열 번호(0부터 시작) |

## 카운터 객체

### 8. Statement Counters (구문 카운터)
각 구문의 실행 횟수를 기록합니다.

```json
{
  "0": 5,    // 구문 ID 0은 5번 실행됨
  "1": 0,    // 구문 ID 1은 실행되지 않음
  "2": 3     // 구문 ID 2는 3번 실행됨
}
```

### 9. Function Counters (함수 카운터)
각 함수의 호출 횟수를 기록합니다.

```json
{
  "0": 2,    // 함수 ID 0은 2번 호출됨
  "1": 0,    // 함수 ID 1은 호출되지 않음
  "2": 1     // 함수 ID 2는 1번 호출됨
}
```

### 10. Branch Counters (분기 카운터)
각 분기 조건의 실행 횟수를 기록합니다.

```json
{
  "0": [5, 2],    // 분기 ID 0: true 분기 5번, false 분기 2번
  "1": [0, 3],    // 분기 ID 1: true 분기 0번, false 분기 3번
  "2": [1, 1]     // 분기 ID 2: 두 분기 각각 1번씩 실행
}
```

## 분기 유형 설명

### Branch Types (분기 유형)

| 유형 | 설명 | 예시 |
|------|------|------|
| `if` | if 문 | `if (condition) { ... }` |
| `switch` | switch 문 | `switch (value) { case 1: ... }` |
| `cond-expr` | 삼항 연산자 | `condition ? value1 : value2` |
| `binary-expr` | 논리 연산자 | `a && b`, `x \|\| y` |

## 보고서 요약 데이터

### 11. Summary (요약 정보)
각 커버리지 유형의 통계 요약입니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `total` | number | 총 개수 |
| `covered` | number | 커버된 개수 |
| `skipped` | number | 건너뛴 개수 |
| `pct` | number | 커버리지 백분율 |

### 12. Coverage Summary (커버리지 요약)
파일 또는 전체의 커버리지 요약입니다.

| 필드 | 타입 | 설명 |
|------|------|------|
| `lines` | Summary | 라인 커버리지 요약 |
| `functions` | Summary | 함수 커버리지 요약 |
| `statements` | Summary | 구문 커버리지 요약 |
| `branches` | Summary | 분기 커버리지 요약 |

## 실제 예시

### math.js 파일 내용
```javascript
function add(a, b) {
  return a + b;
}

function subtract(a, b) {
  if (a > b) {
    return a - b;
  } else {
    return b - a;
  }
}

function multiply(a, b) {
  return a * b;
}

function divide(a, b) {
  if (b === 0) {
    throw new Error('Division by zero');
  }
  return a / b;
}

module.exports = { add, subtract, multiply, divide };
```

### 완전한 FileCoverage 예시
```json
{
  "path": "/project/src/math.js",
  "statementMap": {
    "0": {"start": {"line": 1, "column": 0}, "end": {"line": 1, "column": 25}},
    "1": {"start": {"line": 2, "column": 2}, "end": {"line": 2, "column": 13}},
    "2": {"start": {"line": 5, "column": 0}, "end": {"line": 5, "column": 30}},
    "3": {"start": {"line": 6, "column": 2}, "end": {"line": 6, "column": 25}},
    "4": {"start": {"line": 8, "column": 4}, "end": {"line": 8, "column": 15}},
    "5": {"start": {"line": 10, "column": 4}, "end": {"line": 10, "column": 15}},
    "6": {"start": {"line": 13, "column": 0}, "end": {"line": 13, "column": 25}},
    "7": {"start": {"line": 14, "column": 2}, "end": {"line": 14, "column": 13}},
    "8": {"start": {"line": 17, "column": 0}, "end": {"line": 17, "column": 30}},
    "9": {"start": {"line": 18, "column": 2}, "end": {"line": 18, "column": 25}},
    "10": {"start": {"line": 20, "column": 4}, "end": {"line": 20, "column": 15}},
    "11": {"start": {"line": 22, "column": 4}, "end": {"line": 22, "column": 15}},
    "12": {"start": {"line": 25, "column": 0}, "end": {"line": 25, "column": 25}}
  },
  "fnMap": {
    "0": {
      "name": "add",
      "decl": {"start": {"line": 1, "column": 9}, "end": {"line": 1, "column": 12}},
      "loc": {"start": {"line": 1, "column": 20}, "end": {"line": 3, "column": 1}},
      "line": 1
    },
    "1": {
      "name": "subtract",
      "decl": {"start": {"line": 5, "column": 9}, "end": {"line": 5, "column": 17}},
      "loc": {"start": {"line": 5, "column": 25}, "end": {"line": 12, "column": 1}},
      "line": 5
    },
    "2": {
      "name": "multiply",
      "decl": {"start": {"line": 13, "column": 9}, "end": {"line": 13, "column": 16}},
      "loc": {"start": {"line": 13, "column": 24}, "end": {"line": 15, "column": 1}},
      "line": 13
    },
    "3": {
      "name": "divide",
      "decl": {"start": {"line": 17, "column": 9}, "end": {"line": 17, "column": 15}},
      "loc": {"start": {"line": 17, "column": 23}, "end": {"line": 24, "column": 1}},
      "line": 17
    }
  },
  "branchMap": {
    "0": {
      "loc": {"start": {"line": 6, "column": 2}, "end": {"line": 6, "column": 25}},
      "type": "if",
      "locations": [
        {"start": {"line": 6, "column": 2}, "end": {"line": 6, "column": 25}},
        {"start": {"line": 6, "column": 2}, "end": {"line": 6, "column": 25}}
      ]
    },
    "1": {
      "loc": {"start": {"line": 18, "column": 2}, "end": {"line": 18, "column": 25}},
      "type": "if",
      "locations": [
        {"start": {"line": 18, "column": 2}, "end": {"line": 18, "column": 25}},
        {"start": {"line": 18, "column": 2}, "end": {"line": 18, "column": 25}}
      ]
    }
  },
  "s": {"0": 1, "1": 1, "2": 1, "3": 1, "4": 3, "5": 2, "6": 1, "7": 1, "8": 1, "9": 1, "10": 1, "11": 1, "12": 1},
  "f": {"0": 5, "1": 3, "2": 2, "3": 1},
  "b": {"0": [3, 2], "1": [1, 0]}
}
```